{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nexport default async function getPics(queryWords, pageNum) {\n    axios.defaults.baseURL = \"https://pixabay.com\";\n    const pictures = await axios.get(\"/api/\", {\n        params: {\n            key: \"31908643-2178b12526c513c1beb381d6b\",\n            q: queryWords,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: pageNum,\n            per_page: 15,\n        }\n    })\n    // totalPages = Math.ceil(pictures.data.totalHits / 15);\n    console.log(pictures.data);\n    console.log(pictures.data.totalHits);\n    return pictures.data;\n};\n","const galleryEl = document.querySelector(\".gallery\");\n\n\nexport default function renderGallery (picsArray) {\n    const galleryMarkup = picsArray\n      .map(({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => `<li class=\"gallery-item\"><a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/></a><ul class=\"img-info-list\">\n            <li class=\"img-info-item\">\n              <h3 class=\"img-info-item-header\">Likes</h3>\n              <p class=\"img-info-item-value\">${likes}</p>\n            </li>\n            <li class=\"img-info-item\">\n              <h3 class=\"img-info-item-header\">Views</h3>\n              <p class=\"img-info-item-value\">${views}</p>\n            </li>\n            <li class=\"img-info-item\">\n              <h3 class=\"img-info-item-header\">Comments</h3>\n              <p class=\"img-info-item-value\">${comments}</p>\n            </li>\n            <li class=\"img-info-item\">\n              <h3 class=\"img-info-item-header\">Downloads</h3>\n              <p class=\"img-info-item-value\">${downloads}</p>\n            </li>\n          </ul></li>`)\n        .join(\"\");\n    \n    galleryEl.insertAdjacentHTML(\"beforeend\", galleryMarkup); \n};\n\nexport function clearGallery() {\n    galleryEl.innerHTML = \"\";\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport getPics from \"./js/pixabay-api\";\nimport renderGallery from \"./js/render-functions\";\nimport { clearGallery } from \"./js/render-functions\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst formEl = document.querySelector(\".form\");\nconst loaderEl = document.querySelector(\".loader\")\nconst galleryEl = document.querySelector(\".gallery\");\nlet pageNum = 1;\nformEl.addEventListener(\"submit\", onSubmit);\nfunction onSubmit(event) {\n    event.preventDefault();\n    const queryWords = event.currentTarget.searchText.value.trim(\"\");\n    if (queryWords === \"\") {\n        return iziToast.error({\n            theme: 'dark',\n            message: \"Please, fill out the search field.\",\n            backgroundColor: '#EF4040',\n            closeOnClick: true,\n            position: 'topRight',\n            timeout: 3000,\n        })\n    } else {\n        clearGallery();\n        loaderEl.classList.remove(\"visually-hidden\");\n        getPics(queryWords, pageNum)\n            .then(response => {\n                const picsArray = response.hits;\n                if (picsArray.length === 0) {\n                    return iziToast.error({\n                        theme: \"dark\",\n                        message: \"Sorry, there are no images matching your search query. Please try again!\",\n                        backgroundColor: \"#EF4040\",\n                        closeOnClick: true,\n                        position: \"topRight\",\n                        timeout: 3000,\n                    })\n                } else {\n                    pageNum += 1;\n                    renderGallery(picsArray);\n                    slGallery.refresh();\n                }\n            })\n            .catch(error => {\n                console.log(error);\n                \n                return iziToast.error({\n                    theme: \"dark\",\n                    title: \"Error!\",\n                    message: \"Sorry, something went wrong.\",\n                    backgroundColor: \"#EF4040\",\n                    closeOnClick: true,\n                    position: \"topRight\",\n                    timeout: 3000,\n                    })\n            })\n            .finally(() => {\n            loaderEl.classList.add(\"visually-hidden\");\n        });\n        event.currentTarget.searchText.value = \"\";\n    }\n    \n};\n\nconst slGalleryOptions = {\n  captionDelay: 250,\n  captionsData: \"alt\",\n};\nlet slGallery = new SimpleLightbox('.gallery a', slGalleryOptions);\n"],"names":["getPics","queryWords","pageNum","axios","pictures","galleryEl","renderGallery","picsArray","galleryMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","clearGallery","formEl","loaderEl","onSubmit","event","iziToast","response","slGallery","error","slGalleryOptions","SimpleLightbox"],"mappings":"owBAGe,eAAeA,EAAQC,EAAYC,EAAS,CACvDC,EAAM,SAAS,QAAU,sBACzB,MAAMC,EAAW,MAAMD,EAAM,IAAI,QAAS,CACtC,OAAQ,CACJ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACT,CAAK,EAED,eAAQ,IAAIE,EAAS,IAAI,EACzB,QAAQ,IAAIA,EAAS,KAAK,SAAS,EAC5BA,EAAS,IACpB,CCpBA,MAAMC,EAAY,SAAS,cAAc,UAAU,EAGpC,SAASC,EAAeC,EAAW,CAC9C,MAAMC,EAAgBD,EACnB,IAAI,CAAC,CAAC,cAAAE,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM,0DAA0DN,CAAa,qCAAqCC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,+CAG9KC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,+CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,+CAIRC,CAAS;AAAA;AAAA,qBAEnC,EACZ,KAAK,EAAE,EAEZV,EAAU,mBAAmB,YAAaG,CAAa,CAC3D,CAEO,SAASQ,GAAe,CAC3BX,EAAU,UAAY,EAC1B,CCtBA,MAAMY,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAW,SAAS,cAAc,SAAS,EAC/B,SAAS,cAAc,UAAU,EACnD,IAAIhB,EAAU,EACde,EAAO,iBAAiB,SAAUE,CAAQ,EAC1C,SAASA,EAASC,EAAO,CACrBA,EAAM,eAAc,EACpB,MAAMnB,EAAamB,EAAM,cAAc,WAAW,MAAM,KAAK,EAAE,EAC/D,GAAInB,IAAe,GACf,OAAOoB,EAAS,MAAM,CAClB,MAAO,OACP,QAAS,qCACT,gBAAiB,UACjB,aAAc,GACd,SAAU,WACV,QAAS,GACrB,CAAS,EAEDL,IACAE,EAAS,UAAU,OAAO,iBAAiB,EAC3ClB,EAAQC,EAAYC,CAAO,EACtB,KAAKoB,GAAY,CACd,MAAMf,EAAYe,EAAS,KAC3B,GAAIf,EAAU,SAAW,EACrB,OAAOc,EAAS,MAAM,CAClB,MAAO,OACP,QAAS,2EACT,gBAAiB,UACjB,aAAc,GACd,SAAU,WACV,QAAS,GACjC,CAAqB,EAEDnB,GAAW,EACXI,EAAcC,CAAS,EACvBgB,EAAU,QAAO,CAErC,CAAa,EACA,MAAMC,IACH,QAAQ,IAAIA,CAAK,EAEVH,EAAS,MAAM,CAClB,MAAO,OACP,MAAO,SACP,QAAS,+BACT,gBAAiB,UACjB,aAAc,GACd,SAAU,WACV,QAAS,GAC7B,CAAqB,EACR,EACA,QAAQ,IAAM,CACfH,EAAS,UAAU,IAAI,iBAAiB,CACpD,CAAS,EACDE,EAAM,cAAc,WAAW,MAAQ,EAG/C,CAEA,MAAMK,EAAmB,CACvB,aAAc,IACd,aAAc,KAChB,EACA,IAAIF,EAAY,IAAIG,EAAe,aAAcD,CAAgB"}